import style from '#css/image_preview.module.css'
import { usePage } from '@inertiajs/react'
import { MouseEvent } from 'react'
import { likeImage } from '~/services/like_image'

type HeartIconProps = {
  id: number
  liked: boolean
  type: 'client' | 'admin'
}

const HeartIcon: React.FC<HeartIconProps> = ({ id, liked, type }) => {
  const _csrf = usePage().props._csrf as string

  const handleClick = async (e: MouseEvent) => {
    e.stopPropagation()
    if (type === 'admin') return
    await likeImage(id, _csrf)
  }

  return (
    <svg
      className={style.heart}
      onClick={handleClick}
      xmlns="http://www.w3.org/2000/svg"
      width="27"
      height="35"
      viewBox="0 0 27 35"
      fill="var(--pink)"
    >
      <path
        d="M14.4252 7.65235C15.2923 6.45936 15.9634 5.49557 16.6731 4.56493C17.6148 3.32775 18.9265 2.58765 20.3266 2.01049C20.8348 1.79754 21.3832 1.69766 21.9339 1.71776C24.2784 1.86136 26.4076 3.92701 26.6672 6.2909C26.982 9.12979 26.2944 11.814 25.1262 14.3408C23.713 17.5194 21.9207 20.5153 19.7881 23.2634C17.8826 25.6577 15.8667 27.9912 14.5771 30.8163C14.0883 31.8906 13.6105 32.9703 13.119 34.0418C13.0163 34.2979 12.8462 34.5214 12.6267 34.6886C12.4072 34.8558 12.1465 34.9603 11.8723 34.9912C11.5981 35.0221 11.3207 34.9781 11.0695 34.8639C10.8184 34.7498 10.6028 34.5697 10.4458 34.3428C10.2162 34.0191 10.0391 33.6613 9.92107 33.2824C8.60381 29.3582 6.51054 25.8096 4.50289 22.2361C3.10278 19.7507 1.80485 17.2101 1.02609 14.4679C0.048495 10.969 -0.194522 7.43695 1.44861 4.03747C1.88153 3.10945 2.45845 2.25572 3.15801 1.50788C3.89864 0.725196 4.8801 0.213156 5.94577 0.0534821C7.01143 -0.106192 8.09987 0.0957028 9.03737 0.626946C11.5228 2.05743 13.4835 3.89387 14.1214 6.82941C14.2073 7.10913 14.3088 7.38387 14.4252 7.65235Z"
        fill="var(--pink)"
      />
      <path
        d="M13.4807 14.0536C14.3395 14.0536 14.8615 13.7499 15.1735 12.949C15.7617 11.4909 16.4217 10.0549 17.1397 8.6548C17.8445 7.2358 18.9103 6.0272 20.2299 5.15038C22.4861 3.6978 23.8779 4.46828 24.0188 7.08348C24.0851 8.30961 23.704 9.56888 23.3919 10.795C22.7347 13.3301 21.5196 15.6498 20.1388 17.8591C18.9707 19.7314 17.6037 21.4795 16.3472 23.2966C15.0907 25.1137 13.8618 26.9446 12.6384 28.7728C12.4672 29.0296 12.3374 29.3251 12.1524 29.6509C11.1527 28.8584 10.9815 27.9581 10.581 27.229C8.79155 23.9815 7.00482 20.7283 5.33408 17.42C4.14937 15.092 3.26015 12.6397 3.12483 9.97759C3.01713 7.87328 3.3209 5.89048 4.62988 4.14241C5.87258 2.48548 7.31135 2.29493 8.8523 3.5901C10.6722 5.12277 11.8734 6.93711 12.0005 9.44461C12.0668 10.7563 12.5776 12.0543 12.9394 13.3439C13.0167 13.6339 13.3122 13.8438 13.4807 14.0536Z"
        fill={liked ? 'var(--pink)' : 'black'}
      />
    </svg>
  )
}

export default HeartIcon
